import{u as k,r as a,j as e}from"./index-KybbPWHZ.js";import{C as S}from"./CourseCard-C9Wubbvb.js";import{c as B}from"./api-Csd6WsQO.js";const v=[{id:1,code:"CS101",title:"Introduction to Computer Science",description:"Learn the fundamentals of computer science and programming with Python.",instructor:"Dr. Sarah Johnson",credits:4,status:"Enroll Now",students:125,duration:"12 weeks",level:"Beginner"},{id:2,code:"MATH201",title:"Linear Algebra",description:"Study vectors, matrices, and linear transformations with real-world applications.",instructor:"Prof. Michael Chen",credits:3,status:"Enroll Now",students:89,duration:"10 weeks",level:"Intermediate"},{id:3,code:"ENG150",title:"Academic Writing",description:"Develop your academic writing skills for university-level coursework.",instructor:"Dr. Emily Wilson",credits:3,status:"Enroll Now",students:67,duration:"8 weeks",level:"Beginner"},{id:4,code:"PHYS202",title:"Classical Mechanics",description:"Explore the fundamental principles of classical mechanics and their applications.",instructor:"Dr. Robert Taylor",credits:4,status:"Enroll Now",students:42,duration:"14 weeks",level:"Advanced"},{id:5,code:"BIO101",title:"Introduction to Biology",description:"An overview of biological concepts including cell biology, genetics, and evolution.",instructor:"Dr. Lisa Wong",credits:3,status:"Enroll Now",students:113,duration:"12 weeks",level:"Beginner"},{id:6,code:"CHEM201",title:"Organic Chemistry",description:"Study the structure, properties, and reactions of organic compounds.",instructor:"Dr. James Wilson",credits:4,status:"Enroll Now",students:78,duration:"16 weeks",level:"Intermediate"}],w=[1,3];function F(){const{currentUser:l}=k(),[h,u]=a.useState([]),[C,m]=a.useState(!0),[d,p]=a.useState(""),[i,x]=a.useState({level:"all",category:"all",sortBy:"recent"}),[c,g]=a.useState(!1);a.useEffect(()=>{(async()=>{try{m(!0),console.log("Courses - Starting data fetch for user:",l),setTimeout(()=>{const r=v.map(o=>({...o,isEnrolled:w.includes(o.id)}));u(r),m(!1),console.log("Courses - Mock data loaded successfully")},500)}catch(r){console.error("Error in Courses fetchCourses:",r),setTimeout(()=>{const o=v.map(t=>({...t,isEnrolled:w.includes(t.id)}));u(o),m(!1)},500)}})()},[l]);const j=s=>{p(s.target.value)},y=s=>{const{name:r,value:o}=s.target;x(t=>({...t,[r]:o}))},b=()=>{g(!c)},N=()=>{if(!l){alert("Please login to create courses");return}if(!n){alert("Only teachers can create courses");return}alert("Course creation functionality will be implemented soon!")},E=async s=>{var r,o;try{if(!l){alert("Please login to enroll in courses");return}console.log("Enrolling in course:",s),await B.enrollInCourse(s),u(h.map(t=>t.id===s||t._id===s?{...t,isEnrolled:!0,status:"Enrolled"}:t)),alert('Successfully enrolled in course! Check "My Courses" to view your enrolled courses.')}catch(t){console.error("Error enrolling in course:",t),alert(((o=(r=t.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to enroll in course. Please try again.")}},f=h.filter(s=>{const r=s.title.toLowerCase().includes(d.toLowerCase())||s.code.toLowerCase().includes(d.toLowerCase())||s.instructor.toLowerCase().includes(d.toLowerCase()),o=i.level==="all"||s.level.toLowerCase()===i.level,t=!c||s.isEnrolled;return r&&o&&t}).sort((s,r)=>{switch(i.sortBy){case"name":return s.title.localeCompare(r.title);case"recent":return r.id-s.id;case"popular":return r.students-s.students;default:return 0}}),n=(l==null?void 0:l.role)==="teacher";return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n?"Manage Courses":"Browse Courses"}),e.jsx("p",{className:"mt-2 text-gray-600",children:n?"Create and manage your courses":"Find the perfect course to enhance your skills"})]}),n&&e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Create New Course"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"search",className:"sr-only",children:"Search courses"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",name:"search",id:"search",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search courses...",value:d,onChange:j})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"level",className:"sr-only",children:"Level"}),e.jsxs("select",{id:"level",name:"level",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",value:i.level,onChange:y,children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sortBy",className:"sr-only",children:"Sort by"}),e.jsxs("select",{id:"sortBy",name:"sortBy",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",value:i.sortBy,onChange:y,children:[e.jsx("option",{value:"recent",children:"Most Recent"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"popular",children:"Most Popular"})]})]})]}),!n&&e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("input",{id:"enrolled-only",name:"enrolled-only",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:c,onChange:b}),e.jsx("label",{htmlFor:"enrolled-only",className:"ml-2 block text-sm text-gray-700",children:"Show only my enrolled courses"})]})]}),C?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(s=>e.jsx(S,{course:s,onEnroll:E,isStudent:!n},s.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No courses found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c?"You haven't enrolled in any courses yet.":"No courses match your search criteria. Try adjusting your filters."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",onClick:()=>{p(""),g(!1),x({level:"all",category:"all",sortBy:"recent"})},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:c?"Browse All Courses":"Clear Filters"})})]})]})}export{F as default};
