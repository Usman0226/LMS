import{u as j,r as h,j as e}from"./index-KybbPWHZ.js";import"./api-Csd6WsQO.js";const N=[{id:1,courseId:1,courseCode:"CS101",courseName:"Introduction to Computer Science",instructor:"Dr. Sarah Johnson",assignments:[{id:1,title:"Python Basics",pointsEarned:95,pointsPossible:100,weight:20,submitted:!0},{id:2,title:"Functions and Loops",pointsEarned:88,pointsPossible:100,weight:20,submitted:!0},{id:3,title:"Object-Oriented Programming",pointsEarned:92,pointsPossible:100,weight:30,submitted:!0},{id:4,title:"Final Project",pointsEarned:0,pointsPossible:100,weight:30,submitted:!1}]},{id:2,courseId:2,courseCode:"MATH201",courseName:"Linear Algebra",instructor:"Prof. Michael Chen",assignments:[{id:5,title:"Vectors and Matrices",pointsEarned:100,pointsPossible:100,weight:25,submitted:!0},{id:6,title:"Linear Transformations",pointsEarned:95,pointsPossible:100,weight:25,submitted:!0},{id:7,title:"Eigenvalues and Eigenvectors",pointsEarned:0,pointsPossible:100,weight:25,submitted:!1},{id:8,title:"Final Exam",pointsEarned:0,pointsPossible:100,weight:25,submitted:!1}]},{id:3,courseId:3,courseCode:"ENG150",courseName:"Academic Writing",instructor:"Dr. Emily Wilson",assignments:[{id:9,title:"Research Paper Outline",pointsEarned:45,pointsPossible:50,weight:20,submitted:!0},{id:10,title:"First Draft",pointsEarned:85,pointsPossible:100,weight:30,submitted:!0},{id:11,title:"Peer Review",pointsEarned:50,pointsPossible:50,weight:10,submitted:!0},{id:12,title:"Final Paper",pointsEarned:0,pointsPossible:100,weight:40,submitted:!1}]}],w=r=>{let i=0,o=0,l=0;r.assignments.forEach(a=>{if(a.submitted){const x=a.pointsEarned/a.pointsPossible*a.weight;i+=x,l+=a.weight}o+=a.weight});const d=l>0?i/l*100:0,m=d+(100-l);return{currentGrade:Math.round(d*10)/10,maxPossibleGrade:Math.round(m*10)/10,letterGrade:f(d),completedWeight:l,totalWeight:o}},f=r=>r>=93?"A":r>=90?"A-":r>=87?"B+":r>=83?"B":r>=80?"B-":r>=77?"C+":r>=73?"C":r>=70?"C-":r>=67?"D+":r>=63?"D":r>=60?"D-":"F",g=({percentage:r,color:i="primary"})=>{const o={primary:"bg-primary-600",green:"bg-green-600",yellow:"bg-yellow-500",red:"bg-red-600"};return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`${o[i]} h-2.5 rounded-full`,style:{width:`${Math.min(100,Math.max(0,r))}%`}})})};function C(){const{currentUser:r}=j(),[i,o]=h.useState([]),[l,d]=h.useState(!0),[m,a]=h.useState("all"),[x,b]=h.useState(null),n=(r==null?void 0:r.role)==="teacher";h.useEffect(()=>{(async()=>{try{d(!0),setTimeout(()=>{const s=N.map(c=>({...c,...w(c)}));o(s),d(!1)},500)}catch(s){console.error("Error fetching grades:",s),d(!1)}})()},[n]);const y=t=>{b(x===t?null:t)},u=m==="all"?i:i.filter(t=>t.courseId.toString()===m),p=i.length>0?i.reduce((t,s)=>t+s.currentGrade,0)/i.length:0;return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n?"Gradebook":"My Grades"}),e.jsx("p",{className:"mt-2 text-gray-600",children:n?"View and manage student grades":"Track your academic progress and performance"})]}),n&&e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Export Gradebook"})})]}),!n&&i.length>0&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Overall Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current GPA"}),e.jsxs("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:[p.toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[f(p)," - ",v(p)]}),e.jsx("div",{className:"mt-3",children:e.jsx(g,{percentage:p})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Courses In Progress"}),e.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:i.filter(t=>t.completedWeight<100).length}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.length," total courses"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Assignments Submitted"}),e.jsxs("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:[i.reduce((t,s)=>t+s.assignments.filter(c=>c.submitted).length,0),e.jsx("span",{className:"text-lg text-gray-500",children:" / "}),i.reduce((t,s)=>t+s.assignments.length,0)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Math.round(i.reduce((t,s)=>t+s.assignments.filter(c=>c.submitted).length,0)/Math.max(1,i.reduce((t,s)=>t+s.assignments.length,0))*100),"% completion rate"]})]})]})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"w-full sm:w-64 mb-4 sm:mb-0",children:[e.jsx("label",{htmlFor:"course-filter",className:"sr-only",children:"Filter by course"}),e.jsxs("select",{id:"course-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",value:m,onChange:t=>a(t.target.value),children:[e.jsx("option",{value:"all",children:"All Courses"}),i.map(t=>e.jsxs("option",{value:t.id,children:[t.courseCode," - ",t.courseName]},t.id))]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-gray-500 mr-2",children:[u.length," ",u.length===1?"course":"courses"]}),e.jsx("button",{type:"button",className:"ml-2 p-2 text-gray-400 hover:text-gray-500",title:"Refresh",onClick:()=>window.location.reload(),children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})}),e.jsx("div",{className:"space-y-6",children:u.length>0?u.map(t=>e.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50",onClick:()=>y(t.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[t.courseCode," - ",t.courseName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Instructor: ",t.instructor]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"text-right mr-4",children:[e.jsxs("span",{className:"text-2xl font-semibold text-gray-900",children:[t.currentGrade,"%"]}),e.jsx("span",{className:"ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:t.letterGrade}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.completedWeight,"% of grade calculated"]})]}),e.jsx("svg",{className:`h-5 w-5 text-gray-400 transform transition-transform ${x===t.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 mb-1",children:[e.jsx("span",{children:"Course Progress"}),e.jsxs("span",{children:[t.completedWeight,"%"]})]}),e.jsx(g,{percentage:t.completedWeight,color:t.completedWeight<50?"red":t.completedWeight<80?"yellow":"green"})]})]}),x===t.id&&e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weight"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.assignments.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.dueDate).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.submitted?s.pointsEarned===0?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.submitted?s.pointsEarned===0?"Submitted (Ungraded)":"Graded":"Not Submitted"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:s.submitted?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`font-medium ${s.pointsEarned/s.pointsPossible>=.9?"text-green-600":s.pointsEarned/s.pointsPossible>=.7?"text-yellow-600":"text-red-600"}`,children:[s.pointsEarned," / ",s.pointsPossible]}),e.jsxs("span",{className:"ml-1",children:["(",(s.pointsEarned/s.pointsPossible*100).toFixed(1),"%)"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:[s.weight,"%"]})]},s.id))})]})}),n&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Download Grade Report"})})]})]},t.id)):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No grades found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?"No student grades are available for the selected filter.":"You have no graded assignments yet."})]})})]})}function v(r){return r>=90?"Excellent":r>=80?"Very Good":r>=70?"Good":r>=60?"Satisfactory":"Needs Improvement"}export{C as default};
